(()=>{"use strict";var o={718:(o,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Board=void 0;var i=e(950),r=e(593),n=function(){function o(o){this.game=o,this.ratio=100,this.side_length=.01*this.ratio*i.SIDE_LENGTH,this.target_coordinate=[-1,-1],this.intersections=new Array,this.moves=0,this.half_move_counter=0,this.full_move_counter=1;for(var t=0;t<9;t++){this.intersections[t]=[];for(var e=0;e<10;e++)this.intersections[t][e]=new i.Point(t+1,e+1)}}return o.prototype.movePieceFromSrcToDest=function(o,t,e){t.setPiece(null),o.moveToPoint(e),e.setPiece(o)},o.prototype.getPointFromCoordinates=function(o,t){return this.validateXCoordinate(o)&&this.validateYCoordinate(t)?this.intersections[o-1][t-1]:null},o.prototype.getCoordinateFromElemId=function(o){console.log(o);var t=o.split("_"),e=t[2],i=t[3];return[parseInt(e),parseInt(i)]},o.prototype.validateXCoordinate=function(o){return o>=1&&o<=9},o.prototype.validateYCoordinate=function(o){return o>=1&&o<=10},o.prototype.getRowFromYCoordinate=function(o){for(var t=[],e=0;e<9;e++)t.push(this.intersections[e][o-1]);return t},o.prototype.getColFromXCoordinate=function(o){for(var t=[],e=0;e<10;e++)t.push(this.intersections[o-1][e]);return t},o.prototype.getPiecePlacementString=function(){console.log("Getting Piece Placement:");for(var o="",t=0;t<=9;t++){for(var e=0,i=0,r=this.getRowFromYCoordinate(t+1);i<r.length;i++){var n=r[i];n.piece?(0!=e&&(o+=e+"",e=0),o+=n.piece.piece_role):e++}9!=t&&(0!=e&&(o+=e+""),o+="/")}return console.log(o),o},o.prototype.getActiveColor=function(){return this.active_piece?this.active_piece.getColor().toString():""},o.prototype.increaseHalfMovementCount=function(){this.half_move_counter++},o.prototype.increaseFullMoveCount=function(){this.full_move_counter++},o.prototype.getFenString=function(){return new r.FenNotation(this.getPiecePlacementString(),this.getActiveColor(),this.half_move_counter,this.full_move_counter).getFenNotation()},o.prototype.detectZoom=function(){var o=0;void 0!==window.devicePixelRatio?o=window.devicePixelRatio:void 0!==window.outerWidth&&void 0!==window.innerWidth&&(o=window.outerWidth/window.innerWidth),o&&(o=Math.round(100*o)),this.ratio=o},o.prototype.render=function(){var o=$("#board");$("#id_chessboard").css("position","fixed"),$("#id_chessboard").css("max-height","100vh"),$("#id_chessboard").css("margin","0"),$("#id_chessboard").css("padding","0vw"),o.css("margin-left","auto"),o.css("margin-right","auto"),o.css("padding",0),$(".className_grid_div").css("background-color","rgba(255,0,0,0.3)"),$(window).on("resize",(function(){(0,i.fitSize)()})),$(document).on("ready",(function(){(0,i.fitSize)()})),$("#board").css("max-width","100vh")},o}();t.Board=n},225:function(o,t,e){var i,r=this&&this.__extends||(i=function(o,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,t){o.__proto__=t}||function(o,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(o[e]=t[e])})(o,t)},function(o,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}i(o,t),o.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),n=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(t,"__esModule",{value:!0}),t.BlackAdvisor=t.RedAdvisor=void 0;var s=n(e(102)),a=e(570),c=e(950),l=function(o){function t(t,e,i){return o.call(this,t,e,a.PieceRole.Advisor,i)||this}return r(t,o),t.prototype.canMove=function(t){var e=t.x_coor,i=t.y_coor;return!(Math.abs(e-this.point.x_coor)>1||Math.abs(i-this.point.y_coor)>1||o.prototype.checkSameColorPieceInPoint.call(this,t))},t}(a.Piece),h=function(o){function t(t,e){var i=o.call(this,e,t,a.PlayerColor.RED)||this;return i.elem.src="../img/pieces/red-shi.png",i.board=t,i.point.setPiece(i),i}return r(t,o),t.prototype.movablePoints=function(){var o=[];return o.concat(this.checkPeriphery())},t.prototype.checkPeriphery=function(){var o=this.point.getX(),t=this.point.getY(),e=this.board.getPointFromCoordinates(o-1,t-1),i=this.board.getPointFromCoordinates(o+1,t-1),r=new c.Point(-1,-1),n=new c.Point(-1,-1);try{r=this.board.getPointFromCoordinates(o-1,t+1),n=this.board.getPointFromCoordinates(o+1,t+1)}catch(o){s.default.trace("出错！"),console.error(o)}var a=[];return console.log("++++++++++++++++++++++ debug +++++++++++++++++++++++"),e&&this.isValidGeneralPosition(e)&&a.push(e),i&&this.isValidGeneralPosition(i)&&a.push(i),r&&this.isValidGeneralPosition(r)&&a.push(r),n&&this.isValidGeneralPosition(n)&&(console.log(n.getPiece()),a.push(n)),a},t.prototype.isValidGeneralPosition=function(o){return console.log("isValidGeneralPosition +++++++++++"),console.log(o),console.log(o.getX()),console.log(o.getY()),o.getX()>=4&&o.getX()<=6&&o.getY()>=8&&o.getY()<=10},t}(l);t.RedAdvisor=h;var d=function(o){function t(t,e){var i=o.call(this,e,t,a.PlayerColor.BLACK)||this;return i.elem.src="../img/pieces/black-shi.png",i.board=t,i.point.setPiece(i),i}return r(t,o),t.prototype.movablePoints=function(){var o=[];return o.concat(this.checkPeriphery())},t.prototype.checkPeriphery=function(){var o=this.point.getX(),t=this.point.getY(),e=this.board.getPointFromCoordinates(o+1,t+1),i=this.board.getPointFromCoordinates(o-1,t+1),r=new c.Point(-1,-1),n=new c.Point(-1,-1);try{r=this.board.getPointFromCoordinates(o+1,t-1),n=this.board.getPointFromCoordinates(o-1,t-1)}catch(o){s.default.trace("出错！"),console.error(o)}var a=[];return console.log("++++++++++++++++++++++ debug +++++++++++++++++++++++"),e&&this.isValidGeneralPosition(e)&&a.push(e),i&&this.isValidGeneralPosition(i)&&a.push(i),r&&this.isValidGeneralPosition(r)&&a.push(r),n&&this.isValidGeneralPosition(n)&&(console.log(n.getPiece()),a.push(n)),a},t.prototype.isValidGeneralPosition=function(o){return console.log("isValidGeneralPosition +++++++++++"),console.log(o),console.log(o.getX()),console.log(o.getY()),o.getX()>=4&&o.getX()<=6&&o.getY()>=1&&o.getY()<=3},t}(l);t.BlackAdvisor=d},869:function(o,t,e){var i,r=this&&this.__extends||(i=function(o,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,t){o.__proto__=t}||function(o,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(o[e]=t[e])})(o,t)},function(o,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}i(o,t),o.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),n=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(t,"__esModule",{value:!0}),t.RedWarElephant=t.BlackWarElephant=void 0;var s=n(e(102)),a=e(570),c=e(950),l=function(o){function t(t,e,i){return o.call(this,t,e,a.PieceRole.WarElephant,i)||this}return r(t,o),t.prototype.canMove=function(t){var e=t.x_coor,i=t.y_coor;return!(Math.abs(e-this.point.x_coor)>1||Math.abs(i-this.point.y_coor)>1||o.prototype.checkSameColorPieceInPoint.call(this,t))},t.prototype.movablePoints=function(){var o=[];return o.concat(this.checkMoves())},t.prototype.checkMoves=function(){s.default.trace("in checkMoves()");var o=this.point.getX(),t=this.point.getY(),e=new c.Point(-1,-1),i=new c.Point(-1,-1),r=new c.Point(-1,-1),n=new c.Point(-1,-1),a=new c.Point(-1,-1),l=new c.Point(-1,-1),h=new c.Point(-1,-1),d=new c.Point(-1,-1);i=this.board.getPointFromCoordinates(o+1,t+1),n=this.board.getPointFromCoordinates(o-1,t+1),l=this.board.getPointFromCoordinates(o+1,t-1),d=this.board.getPointFromCoordinates(o-1,t-1);try{i.piece||(e=this.board.getPointFromCoordinates(o+2,t+2))}catch(o){}try{n.piece||(r=this.board.getPointFromCoordinates(o-2,t+2))}catch(o){}try{l.piece||(a=this.board.getPointFromCoordinates(o+2,t-2))}catch(o){}try{d.piece||(h=this.board.getPointFromCoordinates(o-2,t-2))}catch(o){}var p=[];return console.log("++++++++++++++++++++++ debug +++++++++++++++++++++++"),e&&this.isValidPosition(e)&&p.push(e),r&&this.isValidPosition(r)&&p.push(r),a&&this.isValidPosition(a)&&p.push(a),h&&this.isValidPosition(h)&&(console.log(h.getPiece()),p.push(h)),p},t}(a.Piece),h=function(o){function t(t,e){var i=o.call(this,e,t,a.PlayerColor.BLACK)||this;return i.elem.src="../img/pieces/black-xiang.png",i.board=t,i.point.setPiece(i),$(i.elem).on("click",(function(){o.prototype.movablePoints.call(i)})),i}return r(t,o),t.prototype.isValidPosition=function(o){return o.getY()<=5},t}(l);t.BlackWarElephant=h;var d=function(o){function t(t,e){var i=o.call(this,e,t,a.PlayerColor.RED)||this;return i.elem.src="../img/pieces/red-xiang.png",i.board=t,i.point.setPiece(i),$(i.elem).on("click",(function(){o.prototype.movablePoints.call(i)})),i}return r(t,o),t.prototype.isValidPosition=function(o){return o.getY()>=6},t}(l);t.RedWarElephant=d},653:function(o,t,e){var i,r=this&&this.__extends||(i=function(o,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,t){o.__proto__=t}||function(o,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(o[e]=t[e])})(o,t)},function(o,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}i(o,t),o.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),n=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(t,"__esModule",{value:!0}),t.BlackCannon=t.RedCannon=void 0;var s=n(e(102)),a=e(570),c=e(950),l=function(o){function t(t,e,i){return o.call(this,t,e,a.PieceRole.Cannon,i)||this}return r(t,o),t.prototype.isValidCannonPosition=function(o,t){return t>=0&&t<=10&&o>=0&&o<=9},t.prototype.canMove=function(t){var e=t.x_coor,i=t.y_coor;return!(!this.isValidCannonPosition(e,i)||Math.abs(e-this.point.x_coor)>1||Math.abs(i-this.point.y_coor)>1||o.prototype.checkSameColorPieceInPoint.call(this,t))},t.prototype.movablePoints=function(){var o=[];return(o=(o=(o=(o=(o=o.concat(this.checkRow())).concat(this.checkColumn())).concat(this.checkShellingRowLHS())).concat(this.checkShellingRowRHS())).concat(this.checkShellingColUpper())).concat(this.checkShellingColLower())},t.prototype.checkShellingRowLHS=function(){s.default.trace("in checkShellingRowLHS()"),s.default.trace("Cannon");var o=this.point.x_coor,t=this.board.getRowFromYCoordinate(this.point.y_coor),e=!1,i=[];for(var r in t){var n=8-parseInt(r);if(console.log(n),n+1<o&&(s.default.trace("正在检测该棋子的左侧"),t[n].piece)){if(e){i.push(t[n]);break}if(!e){e=!0;continue}}}return i},t.prototype.checkShellingRowRHS=function(){s.default.trace("in checkShelling()"),s.default.trace("Cannon");var o=this.point.x_coor,t=this.board.getRowFromYCoordinate(this.point.y_coor),e=!1,i=[];for(var r in t)if(parseInt(r)+1>o&&(s.default.trace("正在检测该棋子的右侧"),t[r].piece)){if(e){i.push(t[r]);break}if(!e){e=!0;continue}}return i},t.prototype.checkShellingColUpper=function(){s.default.trace("in checkShellingColUpper()"),s.default.trace("Cannon");var o=this.point.y_coor,t=this.board.getColFromXCoordinate(this.point.x_coor),e=!1,i=new c.Point(-1,-1),r=[];for(var n in t){var a=9-parseInt(n);if(a+1<o&&(s.default.trace("正在检测该棋子的上方"),t[a].piece)){if(console.log("piece_col[index]piece_col[index] ===================++"),console.log(t[a]),e){s.default.trace("有炮台了，添加以下点："),s.default.trace(t[a]),r.push(t[a]);break}if(!e){s.default.trace("无炮台"),i=t[a],console.log("炮台找到了！："),console.log(i),e=!0;continue}}}return r},t.prototype.checkShellingColLower=function(){var o=this.point.y_coor,t=this.board.getColFromXCoordinate(this.point.x_coor),e=!1,i=new c.Point(-1,-1),r=[];for(var n in t)if(parseInt(n)+1>o&&(s.default.trace("正在检测该棋子的下方"),t[n].piece)){if(console.log("piece_col[index] ===================++"),console.log(t[n]),console.log("cornerstone_flag:"),console.log(e),1==e){s.default.trace("有炮台了，正在添加以下点："),s.default.trace(t[n]),r.push(t[n]);break}if(!e){e=!0,s.default.trace("之前无炮台，现在有炮台了:"),i=t[n],console.log(e),console.log(i);continue}}return r},t.prototype.checkColumn=function(){s.default.trace("in checkColumn()"),s.default.trace("Cannon");var o=this.point.y_coor,t=this.board.getColFromXCoordinate(this.point.x_coor),e=0,i=9;for(var r in t)if(s.default.trace("piece_col:"),s.default.trace(t),null!=t[r].piece)if(s.default.trace("有棋子"),parseInt(r)<o-1)t[r].piece.color==a.PlayerColor.BLACK?(s.default.trace("队友在上方"),e=parseInt(r)+1):t[r].piece.color!=a.PlayerColor.BLACK&&(e=parseInt(r),console.log("debugging..........................."),console.log(e)),e===o-1&&(e=o);else if(parseInt(r)>o-1){t[r].piece.color==a.PlayerColor.BLACK?i=parseInt(r)-1:t[r].piece.color!=a.PlayerColor.BLACK&&(i=parseInt(r)),i===o-1&&(i=o-2);break}for(var n=[],c=e;c<=i;c++)o-1!==c&&n.push(t[c]);return console.log(n),n},t.prototype.checkRow=function(){s.default.trace("in checkRows()");var o=this.point.x_coor,t=this.board.getRowFromYCoordinate(this.point.y_coor),e=0,i=8;for(var r in t)if(null!=t[r].piece)if(s.default.trace("有棋子"),s.default.trace(t),parseInt(r)<o-1)t[r].getPiece().isFriendly()?(console.log("---------------------------------debug-----------------------------"),e=parseInt(r)+1):e=parseInt(r),e===o-1&&(e=o),s.default.trace("start_flag:"+e);else if(parseInt(r)>o-1){(i=t[r].getPiece().isFriendly()?parseInt(r)-1:parseInt(r))===o-1&&(i=o-2),s.default.trace("end_flag:"+i);break}for(var n=[],a=e;a<=i;a++)o-1!==a&&n.push(t[a]);return console.log(n),n},t}(a.Piece),h=function(o){function t(t,e){var i=o.call(this,e,t,a.PlayerColor.BLACK)||this;return i.elem.src="../img/pieces/black-pao.png",i.board=t,i.point.setPiece(i),$(i.elem).on("click",(function(){o.prototype.movablePoints.call(i)})),i}return r(t,o),t}(l);t.BlackCannon=h;var d=function(o){function t(t,e){var i=o.call(this,e,t,a.PlayerColor.RED)||this;return i.elem.src="../img/pieces/red-pao.png",i.board=t,i.point.setPiece(i),$(i.elem).on("click",(function(){o.prototype.movablePoints.call(i)})),i}return r(t,o),t}(l);t.RedCannon=d},570:function(o,t,e){var i=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerColor=t.PieceRole=t.Piece=void 0;var r=i(e(102)),n=e(950);Object.defineProperty(t,"PlayerColor",{enumerable:!0,get:function(){return n.PlayerColor}}),t.PieceRole={General:"King",Advisor:"Advisor",WarElephant:"Bishop",Chariot:"Rook",Cavalry:"Night",Cannon:"Cannon",Soldier:"Pawn"};var s=function(){function o(o,t,e,i){this.piece_role_dict={General:"King",Advisor:"Advisor",WarElephant:"Bishop",Chariot:"Rook",Cavalry:"Night",Cannon:"Cannon",Soldier:"Pawn"},this.point=o,this.active=!1,this.board=t,this.color=i,this.color==n.PlayerColor.RED?this.piece_role=e[0].toUpperCase():this.color==n.PlayerColor.BLACK&&(this.piece_role=e[0].toLowerCase()),this.elem=document.createElement("img"),this.ratio=100,this.side_length=.01*this.ratio*n.SIDE_LENGTH,this.state=0,$(window).on("mousedown",(function(o){o.preventDefault()})),$(window).on("change",(function(o){o.preventDefault(),console.log("changed")})),this.listenerManager()}return o.prototype.listenerManager=function(){this.attachSelectPieceListener()},o.prototype.attachSelectPieceListener=function(){var o=this;console.log(this.board.active_piece),$(this.elem).on("click",(function(t){if(o.board.active_piece&&o.board.active_piece!=o){if(console.log("之前选中了其他的棋子"),o.board.active_piece&&o.getCurrentPlayer()==o.color)return o.board.active_piece.active=!1,void(o.board.active_piece=void 0)}else{console.log("新点击了棋子："),console.log(o.piece_role),console.log(o.elem),t.preventDefault(),$(".className_grid_div").css("background","rgba(3, 181, 252,0.0)");var e=[];e=o.movablePoints(),o.getCurrentPlayer()==o.color&&e.forEach((function(o){$(o.elem).css("background","rgba(3, 181, 252,0.5")})),o.active=!0,o.board.active_piece=o,setTimeout((function(){o.attachMoveToGridListener()}),100)}}))},o.prototype.attachMoveToGridListener=function(){var o=this;console.log(this.point),$(".className_grid_div").on("click",(function(t){if(console.log("点击了棋子:"),console.log(t.target),console.log(t.target.tagName),console.log("棋子所在的格子:"),console.log(t.target.parentNode),console.log(t.target.parentElement),o.board.active_piece&&o.board.game.getCurrentPlayer()==o.color){if(console.log("the piece is selected?"+o.active),console.log("active piece:"),console.log(o.board.active_piece),console.log(o.board.target_coordinate),"IMG"==t.target.tagName.toUpperCase()){console.log("点击了另一个棋子");var e=t.target.parentElement;null!=e&&(console.log("棋子所在的格子："),console.log(e),o.board.target_coordinate=o.board.getCoordinateFromElemId(e.id))}else console.log("点击了一个空的格子"),o.board.target_coordinate=o.board.getCoordinateFromElemId(t.target.id);console.log(o.board.getPointFromCoordinates(o.board.target_coordinate[0],o.board.target_coordinate[1]));var i=o.board.getPointFromCoordinates(o.board.target_coordinate[0],o.board.target_coordinate[1]);if(!o.movablePoints().includes(i))return void console.log("不能这么走！！！");if(-1!=o.board.target_coordinate[0]&&-1!=o.board.target_coordinate[1]){if(o.board.getPointFromCoordinates(o.board.target_coordinate[0],o.board.target_coordinate[1]).hasPiece()){if(o.isFriendly(o.board.getPointFromCoordinates(o.board.target_coordinate[0],o.board.target_coordinate[1]).getPiece()))return alert("You Can't Move Here, A Friendly Piece is at this Position"),void o.removeMoveToGridListener();o.isFriendly(o.board.getPointFromCoordinates(o.board.target_coordinate[0],o.board.target_coordinate[1]).getPiece())?(delete o.board.getPointFromCoordinates(o.board.target_coordinate[0],o.board.target_coordinate[1]).piece,o.board.getPointFromCoordinates(o.board.target_coordinate[0],o.board.target_coordinate[1]).elem.innerHTML=""):(delete o.board.getPointFromCoordinates(o.board.target_coordinate[0],o.board.target_coordinate[1]).piece,console.log("=========  debug ==========="),console.log(o.board.getPointFromCoordinates(o.board.target_coordinate[0],o.board.target_coordinate[1])),o.board.getPointFromCoordinates(o.board.target_coordinate[0],o.board.target_coordinate[1]).elem.innerHTML="")}else o.board.getPointFromCoordinates(o.board.target_coordinate[0],o.board.target_coordinate[1]).elem.innerHTML="";console.log(o.board.target_coordinate);var r=o.board.target_coordinate[0],n=o.board.target_coordinate[1];o.board.active_piece.moveToPoint(o.board.getPointFromCoordinates(r,n)),$(".className_grid_div").css("background","rgba(0,0,0,0.0)"),o.board.target_coordinate=[-1,-1],o.active=!1,o.board.game.alternatePlayer()}}else console.log("还没有选择棋子......"),console.log("Is the piece is selected? "+o.active),console.log("Doing nothing..."),$(".className_grid_div").css("background","rgba(0,0,0,0.0)");o.removeMoveToGridListener()}))},o.prototype.removeMoveToGridListener=function(){this.board.active_piece=null,console.log("已经点击了移动目标格,现在移除MoveToGridListener"),$(".className_grid_div").off("click"),$(".className_grid_div").css("background","rgba(0,0,0,0.0)")},o.prototype.movablePoints=function(){return r.default.trace("movable points of a piece"),[]},o.prototype.getElement=function(){return this.elem},o.prototype.moveToPoint=function(o){this.board.intersections[this.point.x_coor-1][this.point.y_coor-1].elem.removeChild(this.elem),delete this.board.intersections[this.point.x_coor-1][this.point.y_coor-1].piece,this.point=o,this.board.intersections[this.point.x_coor-1][this.point.y_coor-1].elem.appendChild(this.elem),this.board.intersections[this.point.x_coor-1][this.point.y_coor-1].piece=this,this.board.getFenString(),this.board.increaseFullMoveCount(),console.log("当前的FEN string:",this.board.getFenString())},o.prototype.getRole=function(){return this.piece_role},o.prototype.getColor=function(){return this.color},o.prototype.getCurrentPlayer=function(){return this.board.game.getCurrentPlayer()},o.prototype.getTargetPointCoordinate=function(){return this.board.target_coordinate},o.prototype.getTargetPointXCoordinate=function(){return this.board.target_coordinate[0]},o.prototype.getTargetPointYCoordinate=function(){return this.board.target_coordinate[1]},o.prototype.checkSameColorPieceInPoint=function(o){var t=o.getPiece();return!!t&&t.getColor()===this.color},o.prototype.isFriendly=function(o){try{return o||console.log("没有棋子！"),o.getColor()===this.color}catch(o){console.log("没有棋子！")}return!0},o.prototype.isEnemy=function(o){return!!o&&o.getColor()!=this.color},o.prototype.render=function(){this.board.intersections[this.point.x_coor-1][this.point.y_coor-1].elem.append(this.elem),$(this.elem).addClass("pieces"),$(this.elem).addClass(this.piece_role.toString()),$(this.elem).addClass(n.PlayerColor[this.color].toString())},o.prototype.destroy=function(){this.board.intersections[this.point.x_coor-1][this.point.y_coor-1].elem.remove(this.elem)},o.adjustResize=function(){screen.width==window.innerWidth?(console.log("at exact 100%"),(0,n.getChessBoardSize)(),$(".className_grid_div").css("width",n.SIDE_LENGTH*((0,n.getZoomedRatio)()/100)),$(".className_grid_div").css("height",n.SIDE_LENGTH*((0,n.getZoomedRatio)()/100)),$(".pieces").css("width",n.SIDE_LENGTH*((0,n.getZoomedRatio)()/100)),$(".pieces").css("height",n.SIDE_LENGTH*((0,n.getZoomedRatio)()/100)),$("#board").css("width",$("#board").css("height")),$("#id_chessboard").css("width",$("#board").css("width"))):screen.width>window.innerWidth?(console.log("you have zoomed in the page i.e more than 100%"),(0,n.getZoomedRatio)(),(0,n.getChessBoardSize)(),$(".className_grid_div").css("width",n.SIDE_LENGTH*((0,n.getZoomedRatio)()/100)),$(".className_grid_div").css("height",n.SIDE_LENGTH*((0,n.getZoomedRatio)()/100)),$(".pieces").css("width",n.SIDE_LENGTH*((0,n.getZoomedRatio)()/100)),$(".pieces").css("height",n.SIDE_LENGTH*((0,n.getZoomedRatio)()/100)),$("#board").css("width",$("#board").css("height")),$("#board").css("column-gap","0px"),$("#id_chessboard").css("width",$("#board").css("width"))):(console.log("you have zoomed out i.e less than 100%"),(0,n.getZoomedRatio)(),(0,n.getChessBoardSize)(),$(".className_grid_div").css("width"),$(".className_grid_div").css("width",n.SIDE_LENGTH*((0,n.getZoomedRatio)()/100)),$(".className_grid_div").css("height",n.SIDE_LENGTH*((0,n.getZoomedRatio)()/100)),$(".pieces").css("width",n.SIDE_LENGTH*((0,n.getZoomedRatio)()/100)),$(".pieces").css("height",n.SIDE_LENGTH*((0,n.getZoomedRatio)()/100)),$("#board").css("width",$("#board").css("height")),$("#id_chessboard").css("width",$("#board").css("width")))},o}();t.Piece=s},446:function(o,t,e){var i,r=this&&this.__extends||(i=function(o,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,t){o.__proto__=t}||function(o,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(o[e]=t[e])})(o,t)},function(o,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}i(o,t),o.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(t,"__esModule",{value:!0}),t.BlackKing=t.RedKing=void 0;var n=e(570),s=e(950),a=function(o){function t(t,e,i){return o.call(this,t,e,n.PieceRole.General,i)||this}return r(t,o),t.prototype.canMove=function(t){var e=t.x_coor,i=t.y_coor;return!(Math.abs(e-this.point.x_coor)>1||Math.abs(i-this.point.y_coor)>1||o.prototype.checkSameColorPieceInPoint.call(this,t))},t}(n.Piece),c=function(o){function t(t,e){var i=o.call(this,e,t,n.PlayerColor.RED)||this;return i.elem.src="../img/pieces/red-shuai.png",i.board=t,i.point.setPiece(i),i}return r(t,o),t.prototype.movablePoints=function(){var o=[];return o.concat(this.checkPeriphery())},t.prototype.checkPeriphery=function(){var o=this.point.y_coor,t=this.point.x_coor,e=this.board.getPointFromCoordinates(t,o-1),i=this.board.getPointFromCoordinates(t,o+1),r=this.board.getPointFromCoordinates(t-1,o),n=this.board.getPointFromCoordinates(t+1,o),s=[];return console.log("+++++++++++++ debug +++++++++++++++++++++++"),e&&this.isValidGeneralPosition(e)&&(console.log("front.getPiece()"),console.log(e.getPiece()),s.push(e)),i&&this.isValidGeneralPosition(i)&&(console.log("back.getPiece()"),console.log(i.getPiece()),s.push(i)),r&&this.isValidGeneralPosition(r)&&(console.log("back.getPiece()"),console.log(r.getPiece()),s.push(r)),n&&this.isValidGeneralPosition(n)&&(console.log("back.getPiece()"),console.log(n.getPiece()),s.push(n)),s},t.prototype.isValidGeneralPosition=function(o){return console.log("isValidGeneralPosition +++++++++++"),console.log(o),console.log(o.getX()),console.log(o.getY()),o.getX()-1>=3&&o.getX()-1<=5&&o.getY()-1>=7&&o.getY()-1<=9},t}(a);t.RedKing=c;var l=function(o){function t(t,e){var i=o.call(this,e,t,n.PlayerColor.BLACK)||this;return i.elem.src="../img/pieces/black-jiang.png",i.board=t,i.point.setPiece(i),i}return r(t,o),t.prototype.movablePoints=function(){var o=[];return o.concat(this.checkPeriphery())},t.prototype.checkPeriphery=function(){var o=this.point.getX(),t=this.point.getY(),e=this.board.getPointFromCoordinates(o,t-1),i=new s.Point(-1,-1);try{i=this.board.getPointFromCoordinates(o,t+1)}catch(o){console.error(o)}var r=this.board.getPointFromCoordinates(o-1,t),n=this.board.getPointFromCoordinates(o+1,t),a=[];return console.log("++++++++++++++++++++++ debug +++++++++++++++++++++++"),e&&this.isValidGeneralPosition(e)&&(console.log("front.getPiece()"),console.log(e.getPiece()),a.push(e)),i&&this.isValidGeneralPosition(i)&&(console.log("back.getPiece()"),console.log(i.getPiece()),a.push(i)),r&&this.isValidGeneralPosition(r)&&(console.log("back.getPiece()"),console.log(r.getPiece()),a.push(r)),n&&this.isValidGeneralPosition(n)&&(console.log("back.getPiece()"),console.log(n.getPiece()),a.push(n)),a},t.prototype.isValidGeneralPosition=function(o){return console.log("isValidGeneralPosition +++++++++++"),console.log(o),console.log(o.getX()),console.log(o.getY()),o.getX()>=4&&o.getX()-1<=6&&o.getY()>=1&&o.getY()<=3},t}(a);t.BlackKing=l},13:function(o,t,e){var i,r=this&&this.__extends||(i=function(o,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,t){o.__proto__=t}||function(o,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(o[e]=t[e])})(o,t)},function(o,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}i(o,t),o.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),n=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(t,"__esModule",{value:!0}),t.RedKnight=t.BlackKnight=void 0;var s=n(e(102)),a=e(570),c=e(950),l=function(o){function t(t,e,i){return o.call(this,t,e,a.PieceRole.Cavalry,i)||this}return r(t,o),t.prototype.isValidPosition=function(o){return o.getY()>=1&&o.getY()<=10&&o.getX()>=1&&o.getX()<=9},t.prototype.canMove=function(t){var e=t.x_coor,i=t.y_coor;return!(Math.abs(e-this.point.x_coor)>1||Math.abs(i-this.point.y_coor)>1||o.prototype.checkSameColorPieceInPoint.call(this,t))},t.prototype.movablePoints=function(){var o=[];return o=o.concat(this.checkMoves()),console.log("movable points:"),console.log(o),o},t.prototype.checkMoves=function(){s.default.trace("in checkMoves()");var o=this.point.getX(),t=this.point.getY(),e=new c.Point(-1,-1),i=this.board.getPointFromCoordinates(o,t-1),r=new c.Point(-1,-1),n=this.board.getPointFromCoordinates(o-1,t),a=new c.Point(-1,-1),l=this.board.getPointFromCoordinates(o,t-1),h=new c.Point(-1,-1),d=this.board.getPointFromCoordinates(o+1,t),p=new c.Point(-1,-1),u=this.board.getPointFromCoordinates(o-1,t),g=new c.Point(-1,-1),f=this.board.getPointFromCoordinates(o,t+1),_=new c.Point(-1,-1),P=this.board.getPointFromCoordinates(o+1,t),b=new c.Point(-1,-1),v=this.board.getPointFromCoordinates(o,t+1);try{i.piece||(e=this.board.getPointFromCoordinates(o-1,t-2))}catch(o){console.log(o)}try{n.piece||(r=this.board.getPointFromCoordinates(o-2,t-1))}catch(o){console.log(o)}try{l.piece||(a=this.board.getPointFromCoordinates(o+1,t-2))}catch(o){console.log(o)}try{d.piece||(h=this.board.getPointFromCoordinates(o+2,t-1))}catch(o){console.log(o)}try{u.piece||(p=this.board.getPointFromCoordinates(o-2,t+1))}catch(o){console.log(o)}try{f.piece||(g=this.board.getPointFromCoordinates(o-1,t+2))}catch(o){console.log(o)}try{v.piece||(b=this.board.getPointFromCoordinates(o+1,t+2))}catch(o){console.log(o)}try{P.piece||(_=this.board.getPointFromCoordinates(o+2,t+1))}catch(o){console.log(o)}var m=[];return console.log("++++++++++++++++++++++ debug +++++++++++++++++++++++"),console.log(e),console.log(r),console.log(a),console.log(h),console.log(p),console.log(g),e&&this.isValidPosition(e)&&m.push(e),r&&this.isValidPosition(r)&&m.push(r),a&&this.isValidPosition(a)&&m.push(a),h&&this.isValidPosition(h)&&m.push(h),p&&this.isValidPosition(p)&&m.push(p),g&&this.isValidPosition(g)&&m.push(g),_&&this.isValidPosition(_)&&m.push(_),b&&this.isValidPosition(b)&&m.push(b),console.log("========================= movable_points_in_this_column"),console.log(m),m},t}(a.Piece),h=function(o){function t(t,e){var i=o.call(this,e,t,a.PlayerColor.BLACK)||this;return i.elem.src="../img/pieces/black-ma.png",i.board=t,i.point.setPiece(i),$(i.elem).on("click",(function(){o.prototype.movablePoints.call(i)})),i}return r(t,o),t}(l);t.BlackKnight=h;var d=function(o){function t(t,e){var i=o.call(this,e,t,a.PlayerColor.RED)||this;return i.elem.src="../img/pieces/red-ma.png",i.board=t,i.point.setPiece(i),$(i.elem).on("click",(function(){o.prototype.movablePoints.call(i)})),i}return r(t,o),t}(l);t.RedKnight=d},189:function(o,t,e){var i,r=this&&this.__extends||(i=function(o,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,t){o.__proto__=t}||function(o,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(o[e]=t[e])})(o,t)},function(o,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}i(o,t),o.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(t,"__esModule",{value:!0}),t.BlackPawn=t.RedPawn=void 0;var n=e(570),s=function(o){function t(t,e,i){return o.call(this,t,e,n.PieceRole.Soldier,i)||this}return r(t,o),t.prototype.canMove=function(t){var e=t.x_coor,i=t.y_coor;return!(Math.abs(e-this.point.x_coor)>1||Math.abs(i-this.point.y_coor)>1||o.prototype.checkSameColorPieceInPoint.call(this,t))},t.prototype.isValidPawnPosition=function(o){return o.getY()>=1&&o.getY()<=10&&o.getX()>=1&&o.getX()<=9},t}(n.Piece),a=function(o){function t(t,e){var i=o.call(this,e,t,n.PlayerColor.RED)||this;return i.elem.src="../img/pieces/red-bing.png",i.board=t,i.point.setPiece(i),i}return r(t,o),t.prototype.movablePoints=function(){var o=[];return this.point.getY()<=5?(console.log("过河后"),o=o.concat(this.afterLanding())):this.point.getY()>=6&&(console.log("过河前"),o=o.concat(this.beforeLanding())),o},t.prototype.beforeLanding=function(){var o=this.point.getX(),t=this.point.getY(),e=this.board.getPointFromCoordinates(o,t-1),i=[];return e&&this.isValidPawnPosition(e)&&i.push(e),i},t.prototype.afterLanding=function(){var o=this.point.getX(),t=this.point.getY(),e=this.board.getPointFromCoordinates(o,t-1),i=this.board.getPointFromCoordinates(o-1,t),r=this.board.getPointFromCoordinates(o+1,t),n=[];return e&&this.isValidPawnPosition(e)&&n.push(e),i&&this.isValidPawnPosition(i)&&(console.log("back.getPiece()"),console.log(i.getPiece()),n.push(i)),r&&this.isValidPawnPosition(r)&&(console.log("back.getPiece()"),console.log(r.getPiece()),n.push(r)),n},t}(s);t.RedPawn=a;var c=function(o){function t(t,e){var i=o.call(this,e,t,n.PlayerColor.BLACK)||this;return i.elem.src="../img/pieces/black-zu.png",i.board=t,i.point.setPiece(i),i}return r(t,o),t.prototype.movablePoints=function(){var o=[];return this.point.getY()<=5?(console.log("过河前"),o=o.concat(this.beforeLanding())):this.point.getY()>=6&&(console.log("过河后"),o=o.concat(this.afterLanding())),o},t.prototype.beforeLanding=function(){var o=this.point.getX(),t=this.point.getY(),e=this.board.getPointFromCoordinates(o,t+1),i=[];return e&&this.isValidPawnPosition(e)&&i.push(e),i},t.prototype.afterLanding=function(){var o=this.point.getX(),t=this.point.getY(),e=this.board.getPointFromCoordinates(o,t+1),i=this.board.getPointFromCoordinates(o-1,t),r=this.board.getPointFromCoordinates(o+1,t),n=[];return e&&this.isValidPawnPosition(e)&&n.push(e),i&&this.isValidPawnPosition(i)&&(console.log("back.getPiece()"),console.log(i.getPiece()),n.push(i)),r&&this.isValidPawnPosition(r)&&(console.log("back.getPiece()"),console.log(r.getPiece()),n.push(r)),n},t}(s);t.BlackPawn=c},358:function(o,t,e){var i,r=this&&this.__extends||(i=function(o,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,t){o.__proto__=t}||function(o,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(o[e]=t[e])})(o,t)},function(o,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}i(o,t),o.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),n=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(t,"__esModule",{value:!0}),t.BlackRook=t.RedRook=void 0;var s=n(e(102)),a=e(570),c=function(o){function t(t,e,i){return o.call(this,t,e,a.PieceRole.Chariot,i)||this}return r(t,o),t.prototype.canMove=function(t){var e=t.x_coor,i=t.y_coor;return!(!this.isValidChariotPosition(e,i)||Math.abs(e-this.point.x_coor)>1||Math.abs(i-this.point.y_coor)>1||o.prototype.checkSameColorPieceInPoint.call(this,t))},t}(a.Piece),l=function(o){function t(t,e){var i=o.call(this,e,t,a.PlayerColor.RED)||this;return i.elem.src="../img/pieces/red-ju.png",i.board=t,i.point.setPiece(i),$(i.elem).on("click",(function(){i.movablePoints()})),i}return r(t,o),t.prototype.movablePoints=function(){var o=[];return(o=o.concat(this.checkRow())).concat(this.checkColumn())},t.prototype.checkColumn=function(){s.default.trace("in checkColumns");var o=this.point.y_coor,t=(this.point.x_coor,this.board.getColFromXCoordinate(this.point.x_coor)),e=(this.board.getRowFromYCoordinate(this.point.y_coor),0),i=9;for(var r in t)if(null!=t[r].piece)if(parseInt(r)<o-1)(e=t[r].piece.color==a.PlayerColor.RED?parseInt(r)+1:parseInt(r))===o-1&&(e=o);else if(parseInt(r)>o-1){(i=t[r].piece.color==a.PlayerColor.RED?parseInt(r)-1:parseInt(r))===o-1&&(i=o-2);break}for(var n=[],c=e;c<=i;c++)o-1!==c&&n.push(t[c]);return n},t.prototype.checkRow=function(){s.default.trace("in checkRows()");var o=this.point.x_coor,t=this.board.getRowFromYCoordinate(this.point.y_coor),e=0,i=8;for(var r in t)if(null!=t[r].piece)if(parseInt(r)<o-1)(e=t[r].piece.color==a.PlayerColor.RED?parseInt(r)+1:parseInt(r))===o-1&&(e=o),s.default.trace("start_flag:"+e);else if(parseInt(r)>o-1){(i=t[r].piece.color==a.PlayerColor.RED?parseInt(r)-1:parseInt(r))===o-1&&(i=o-2),s.default.trace("end_flag:"+i);break}for(var n=[],c=e;c<=i;c++)o-1!==c&&n.push(t[c]);return n},t.prototype.isValidChariotPosition=function(o,t){return t>=8&&t<=10&&o>=4&&o<=6},t}(c);t.RedRook=l;var h=function(o){function t(t,e){var i=o.call(this,e,t,a.PlayerColor.BLACK)||this;return i.elem.src="../img/pieces/black-ju.png",i.board=t,i.point.setPiece(i),$(i.elem).on("click",(function(){i.movablePoints()})),i}return r(t,o),t.prototype.movablePoints=function(){var o=[];return(o=o.concat(this.checkRow())).concat(this.checkColumn())},t.prototype.checkColumn=function(){s.default.trace("in checkColumns"),s.default.trace("Chariots");var o=this.point.y_coor,t=this.board.getColFromXCoordinate(this.point.x_coor),e=0,i=9;for(var r in t)if(s.default.trace("piece_col:"),s.default.trace(t),null!=t[r].piece)if(s.default.trace("有棋子"),parseInt(r)<o-1)t[r].piece.color==a.PlayerColor.BLACK?(s.default.trace("队友在上方"),e=parseInt(r)+1):t[r].piece.color!=a.PlayerColor.BLACK&&(e=parseInt(r),console.log("debugging..........................."),console.log(e)),e===o-1&&(e=o);else if(parseInt(r)>o-1){t[r].piece.color==a.PlayerColor.BLACK?i=parseInt(r)-1:t[r].piece.color!=a.PlayerColor.BLACK&&(i=parseInt(r)),i===o-1&&(i=o-2);break}for(var n=[],c=e;c<=i;c++)o-1!==c&&n.push(t[c]);return console.log(n),n},t.prototype.checkRow=function(){s.default.trace("in checkRows()");var o=this.point.x_coor,t=this.board.getRowFromYCoordinate(this.point.y_coor),e=0,i=8;for(var r in t)if(null!=t[r].piece)if(s.default.trace("有棋子"),s.default.trace(t),parseInt(r)<o-1)t[r].piece.color==a.PlayerColor.BLACK?(console.log("---------------------------------debug-----------------------------"),e=parseInt(r)+1):e=parseInt(r),e===o-1&&(e=o),s.default.trace("start_flag:"+e);else if(parseInt(r)>o-1){(i=t[r].piece.color==a.PlayerColor.BLACK?parseInt(r)-1:parseInt(r))===o-1&&(i=o-2),s.default.trace("end_flag:"+i);break}for(var n=[],c=e;c<=i;c++)o-1!==c&&n.push(t[c]);return console.log(n),n},t.prototype.isValidChariotPosition=function(o,t){return t>=0&&t<=10&&o>=0&&o<=9},t}(c);t.BlackRook=h},20:(o,t,e)=>{var i=e(718),r=e(358),n=e(950),s=e(446),a=e(653),c=e(189),l=e(225),h=e(869),d=e(13);(new(function(){function o(){this.chess_pieces=[],this.currentPlayer=n.PlayerColor.RED,this.board=new i.Board(this),this.full_move_counts=1}return o.prototype.getCurrentPlayer=function(){return this.currentPlayer},o.prototype.alternatePlayer=function(){this.currentPlayer===n.PlayerColor.RED?(this.full_move_counts++,this.currentPlayer=n.PlayerColor.BLACK):this.currentPlayer=n.PlayerColor.RED},o.prototype.initializePieces=function(){var o=new s.RedKing(this.board,this.board.getPointFromCoordinates(5,10)),t=new s.BlackKing(this.board,this.board.getPointFromCoordinates(5,1));this.chess_pieces.push(o),this.chess_pieces.push(t);var e=new r.RedRook(this.board,this.board.getPointFromCoordinates(1,10)),i=new r.RedRook(this.board,this.board.getPointFromCoordinates(9,10));this.chess_pieces.push(e),this.chess_pieces.push(i);var n=new r.BlackRook(this.board,this.board.getPointFromCoordinates(1,1)),p=new r.BlackRook(this.board,this.board.getPointFromCoordinates(9,1));this.chess_pieces.push(n),this.chess_pieces.push(p);var u=new a.RedCannon(this.board,this.board.getPointFromCoordinates(2,8)),g=new a.RedCannon(this.board,this.board.getPointFromCoordinates(8,8));this.chess_pieces.push(u),this.chess_pieces.push(g);var f=new a.BlackCannon(this.board,this.board.getPointFromCoordinates(2,3)),_=new a.BlackCannon(this.board,this.board.getPointFromCoordinates(8,3));this.chess_pieces.push(f),this.chess_pieces.push(_);var P=new c.RedPawn(this.board,this.board.getPointFromCoordinates(1,7)),b=new c.RedPawn(this.board,this.board.getPointFromCoordinates(3,7)),v=new c.RedPawn(this.board,this.board.getPointFromCoordinates(5,7)),m=new c.RedPawn(this.board,this.board.getPointFromCoordinates(7,7)),y=new c.RedPawn(this.board,this.board.getPointFromCoordinates(9,7));this.chess_pieces.push(P),this.chess_pieces.push(b),this.chess_pieces.push(v),this.chess_pieces.push(m),this.chess_pieces.push(y);var C=new c.BlackPawn(this.board,this.board.getPointFromCoordinates(1,4)),w=new c.BlackPawn(this.board,this.board.getPointFromCoordinates(3,4)),k=new c.BlackPawn(this.board,this.board.getPointFromCoordinates(5,4)),F=new c.BlackPawn(this.board,this.board.getPointFromCoordinates(7,4)),R=new c.BlackPawn(this.board,this.board.getPointFromCoordinates(9,4));this.chess_pieces.push(C),this.chess_pieces.push(w),this.chess_pieces.push(k),this.chess_pieces.push(F),this.chess_pieces.push(R);var E=new l.RedAdvisor(this.board,this.board.getPointFromCoordinates(4,10)),S=new l.RedAdvisor(this.board,this.board.getPointFromCoordinates(6,10));this.chess_pieces.push(E),this.chess_pieces.push(S);var I=new l.BlackAdvisor(this.board,this.board.getPointFromCoordinates(4,1)),$=new l.BlackAdvisor(this.board,this.board.getPointFromCoordinates(6,1));this.chess_pieces.push(I),this.chess_pieces.push($);var x=new h.BlackWarElephant(this.board,this.board.getPointFromCoordinates(3,1)),L=new h.BlackWarElephant(this.board,this.board.getPointFromCoordinates(7,1));this.chess_pieces.push(x),this.chess_pieces.push(L);var M=new h.RedWarElephant(this.board,this.board.getPointFromCoordinates(3,10)),B=new h.RedWarElephant(this.board,this.board.getPointFromCoordinates(7,10));this.chess_pieces.push(M),this.chess_pieces.push(B);var N=new d.BlackKnight(this.board,this.board.getPointFromCoordinates(2,1)),G=new d.BlackKnight(this.board,this.board.getPointFromCoordinates(8,1));this.chess_pieces.push(N),this.chess_pieces.push(G);var V=new d.RedKnight(this.board,this.board.getPointFromCoordinates(2,10)),A=new d.RedKnight(this.board,this.board.getPointFromCoordinates(8,10));this.chess_pieces.push(V),this.chess_pieces.push(A);for(var D=0,O=this.chess_pieces;D<O.length;D++)O[D].render()},o.prototype.destroyPieces=function(){for(var o=0,t=this.chess_pieces;o<t.length;o++)t[o].destroy()},o.prototype.render=function(){this.board.render(),this.initializePieces()},o.prototype.restart=function(){this.destroyPieces(),this.initializePieces()},o.prototype.getFullMoveCounts=function(){return this.full_move_counts},o}())).render(),(0,n.fitSize)()},950:function(o,t,e){var i=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerColor=t.SIDE_LENGTH_vw=t.SIDE_LENGTH=t.Point=t.fitSize=t.getChessBoardSize=t.getZoomedRatio=void 0;var r,n=i(e(102));function s(){var o=0;return void 0!==window.devicePixelRatio?o=window.devicePixelRatio:void 0!==window.outerWidth&&void 0!==window.innerWidth&&(o=window.outerWidth/window.innerWidth),o&&(o=Math.round(100*o)),o}!function(o){o[o.BLACK=0]="BLACK",o[o.RED=1]="RED",o[o.NEUTRAL=2]="NEUTRAL",o[o.SPECTATOR=3]="SPECTATOR"}(r||(r={})),t.PlayerColor=r,t.getZoomedRatio=s,t.getChessBoardSize=function(){n.default.trace("chessboard size:");var o=$("#id_chessboard");n.default.trace("chessboad width"),n.default.trace(o.css("width")),n.default.trace("chessboad height"),n.default.trace(o.css("height"))};var a=function(){function o(o,t){this.UcciXCoorMap=new Map([[1,"a"],[2,"b"],[3,"c"],[4,"d"],[5,"e"],[6,"f"],[7,"g"],[8,"h"],[9,"i"]]),this.UcciYCoorMap=new Map([[0,"10"],[1,"9"],[2,"8"],[3,"7"],[4,"6"],[5,"5"],[6,"4"],[7,"3"],[8,"2"],[9,"1"]]),this.x_coor=o,this.y_coor=t,this.ucci_x_coor=this.UcciXCoorMap.get(o),this.ucci_y_coor=this.UcciYCoorMap.get(t),this.elem=document.createElement("div"),this.updateElement(o,t)}return o.prototype.setPiece=function(o){this.piece=o},o.prototype.hasPiece=function(){return!!this.piece},o.prototype.getPiece=function(){return this.piece},o.prototype.getX=function(){return this.x_coor},o.prototype.getY=function(){return this.y_coor},o.prototype.updateElement=function(o,t){var e=this.elem,i=this.x_coor,r=this.y_coor;e.id="grid_div_".concat(i,"_").concat(r),$("#".concat(e.id)).remove(),e.className="className_grid_div",$(e).css("grid-column",o),$(e).css("grid-row",t),$("#board").append(e)},o}();t.Point=a,t.SIDE_LENGTH=75;var c=70/(.01*s());t.SIDE_LENGTH_vw=c,t.fitSize=function(){var o=$("#board");$.when(o).then((function(){console.log("background-size"),console.log(o.css("background-size")),o.css("width",o.css("height")),o.css("height",o.css("width")),o.css("column-gap","0px"),console.log(o.css("row-gap"))})).then((function(){$(".className_grid_div").css("width",parseInt(o.css("width"))/11),$(".className_grid_div").css("height",parseInt(o.css("height"))/10),$(".className_grid_div").css("z-index",10),$(".className_grid_div").css("margin",0),console.log("board.css++++++++++++++++++++++++++"),console.log($(".className_grid_div").css("width")),$("#board").css("grid-template-columns","repeat(9,".concat($(".className_grid_div").css("width"),")")),$("#board").css("column-gap","0.3em"),$("#board").css("justify-content","center")})).then((function(){$(".pieces").css("width",parseInt($(".className_grid_div").css("width"))),$(".pieces").css("height",parseInt($(".className_grid_div").css("width")))})).then((function(){o.css("max-width",o.css("height"))}))}},593:(o,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FenNotation=void 0;var e=function(){function o(o,t,e,i){this.piece_placement=o,this.active_color=t,this.castling_availability="-",this.en_passant_end_coordinate="-",this.half_move_counter=e,this.full_move_counter=i}return o.prototype.getFenNotation=function(){return"".concat(this.piece_placement," ").concat(this.active_color," ").concat(this.castling_availability," ").concat(this.en_passant_end_coordinate," ").concat(this.half_move_counter," ").concat(this.full_move_counter)},o}();t.FenNotation=e},102:function(o,t){var e=this&&this.__spreadArray||function(o,t,e){if(e||2===arguments.length)for(var i,r=0,n=t.length;r<n;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return o.concat(i||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function o(){}return o.trace=function(){for(var o=[],t=0;t<arguments.length;t++)o[t]=arguments[t];console.log.apply(console,e(["<T> ".concat((new Date).toLocaleString(),":")],o,!1))},o.info=function(){for(var o=[],t=0;t<arguments.length;t++)o[t]=arguments[t];console.info.apply(console,e(["<I> ".concat((new Date).toLocaleString(),":")],o,!1))},o.warn=function(){for(var o=[],t=0;t<arguments.length;t++)o[t]=arguments[t];console.warn.apply(console,e(["<W> ".concat((new Date).toLocaleString(),":")],o,!1))},o.error=function(){for(var o=[],t=0;t<arguments.length;t++)o[t]=arguments[t];console.error.apply(console,e(["<E> ".concat((new Date).toLocaleString(),":")],o,!1))},o.test=function(){for(var o=[],t=0;t<arguments.length;t++)o[t]=arguments[t];console.log.apply(console,e(["<X> ".concat((new Date).toLocaleString(),":")],o,!1))},o}();t.default=i}},t={};!function e(i){if(t[i])return t[i].exports;var r=t[i]={exports:{}};return o[i].call(r.exports,r,r.exports,e),r.exports}(20)})();
//# sourceMappingURL=bundle.js.map