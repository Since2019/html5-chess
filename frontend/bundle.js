(()=>{"use strict";var e={718:(e,o,t)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Board=void 0;var r=t(950),i=function(){function e(e){this.game=e,this.ratio=100,this.side_length=.01*this.ratio*r.SIDE_LENGTH,this.target_coordinate=[-1,-1],this.intersections=new Array;for(var o=0;o<9;o++){this.intersections[o]=[];for(var t=0;t<10;t++)this.intersections[o][t]=new r.Point(o+1,t+1)}}return e.prototype.movePieceFromSrcToDest=function(e,o,t){o.setPiece(null),e.moveToPoint(t),t.setPiece(e)},e.prototype.getPointFromCoordinates=function(e,o){return this.validateXCoordinate(e)&&this.validateYCoordinate(o)?this.intersections[e-1][o-1]:null},e.prototype.getCoordinateFromElemId=function(e){console.log(e);var o=e.split("_"),t=o[2],r=o[3];return[parseInt(t),parseInt(r)]},e.prototype.validateXCoordinate=function(e){return e>=1&&e<=9},e.prototype.validateYCoordinate=function(e){return e>=1&&e<=10},e.prototype.getRowFromYCoordinate=function(e){for(var o=[],t=0;t<9;t++)o.push(this.intersections[t][e-1]);return o},e.prototype.getColFromXCoordinate=function(e){for(var o=[],t=0;t<10;t++)o.push(this.intersections[e-1][t]);return o},e.prototype.detectZoom=function(){var e=0;void 0!==window.devicePixelRatio?e=window.devicePixelRatio:void 0!==window.outerWidth&&void 0!==window.innerWidth&&(e=window.outerWidth/window.innerWidth),e&&(e=Math.round(100*e)),this.ratio=e},e.prototype.render=function(){var e=$("#board");$("#id_chessboard").css("position","fixed"),$("#id_chessboard").css("max-height","100vh"),$("#id_chessboard").css("margin","0"),$("#id_chessboard").css("padding","0vw"),e.css("margin-left","auto"),e.css("margin-right","auto"),e.css("padding",0),$(".className_grid_div").css("background-color","rgba(255,0,0,0.3)"),$(window).on("resize",(function(){r.fitSize()})),$(document).on("ready",(function(){r.fitSize()})),$("#board").css("max-width","100vh")},e}();o.Board=i},232:function(e,o,t){var r,i=this&&this.__extends||(r=function(e,o){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,o){e.__proto__=o}||function(e,o){for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t])})(e,o)},function(e,o){function t(){this.constructor=e}r(e,o),e.prototype=null===o?Object.create(o):(t.prototype=o.prototype,new t)}),n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(o,"__esModule",{value:!0}),o.BlackCannon=void 0;var a=n(t(102)),c=t(476),s=function(e){function o(o,t){var r=e.call(this,t,o,c.PlayerColor.BLACK)||this;return r.elem.src="../img/pieces/black-pao.png",r.board=o,r.point.setPiece(r),$(r.elem).on("click",(function(){e.prototype.movablePoints.call(r)})),r}return i(o,e),o.prototype.isValidCannonPosition=function(e,o){return o>=0&&o<=10&&e>=0&&e<=9},o}(function(e){function o(o,t,r){return e.call(this,o,t,c.PieceRole.General,r)||this}return i(o,e),o.prototype.canMove=function(o){var t=o.x_coor,r=o.y_coor;return!(!this.isValidCannonPosition(t,r)||Math.abs(t-this.point.x_coor)>1||Math.abs(r-this.point.y_coor)>1||e.prototype.checkSameColorPieceInPoint.call(this,o))},o.prototype.movablePoints=function(){var e=[];return(e=(e=(e=e.concat(this.checkRow())).concat(this.checkColumn())).concat(this.checkShellingRow())).concat(this.checkShellingCol())},o.prototype.checkShellingRow=function(){a.default.trace("in checkShelling()"),a.default.trace("Cannon");var e=this.point.x_coor,o=this.board.getRowFromYCoordinate(this.point.y_coor),t=!1,r=[];for(var i in o)if(parseInt(i)<e-1){if(a.default.trace("正在检测该棋子的左侧"),o[i].piece){if(t){r.push(o[i]);break}if(!t){t=!0;continue}}}else if(parseInt(i)>e+1&&(a.default.trace("正在检测该棋子的右侧"),o[i].piece)){if(t){r.push(o[i]);break}if(!t){t=!0;continue}}return r},o.prototype.checkShellingCol=function(){a.default.trace("in checkShelling()"),a.default.trace("Cannon");var e=this.point.y_coor,o=this.board.getColFromXCoordinate(this.point.x_coor),t=!1,r=[];for(var i in o)if(parseInt(i)<e){if(a.default.trace("正在检测该棋子的上方"),o[i].piece){if(console.log("piece_col[index]piece_col[index] ===================++"),console.log(o[i]),t){a.default.trace("有炮台了，添加以下点："),a.default.trace(o[i]),r.push(o[i]);break}if(!t){a.default.trace("无炮台"),t=!0;continue}}}else if(parseInt(i)>e&&(a.default.trace("正在检测该棋子的下方"),o[i].piece)){if(console.log("piece_col[index] ===================++"),console.log(o[i]),console.log("cornerstone_flag:"),console.log(t),1==t){a.default.trace("有炮台了，正在添加以下点："),a.default.trace(o[i]),r.push(o[i]);break}if(!t){t=!0,a.default.trace("之前无炮台，现在有炮台了。"),console.log(t);continue}}return r},o.prototype.checkColumn=function(){a.default.trace("in checkColumn()"),a.default.trace("Cannon");var e=this.point.y_coor,o=this.board.getColFromXCoordinate(this.point.x_coor),t=0,r=9;for(var i in o)if(a.default.trace("piece_col:"),a.default.trace(o),null!=o[i].piece)if(a.default.trace("有棋子"),parseInt(i)<e-1)o[i].piece.color==c.PlayerColor.BLACK?(a.default.trace("队友在上方"),t=parseInt(i)+1):o[i].piece.color!=c.PlayerColor.BLACK&&(t=parseInt(i),console.log("debugging..........................."),console.log(t)),t===e-1&&(t=e);else if(parseInt(i)>e-1){o[i].piece.color==c.PlayerColor.BLACK?r=parseInt(i)-1:o[i].piece.color!=c.PlayerColor.BLACK&&(r=parseInt(i)),r===e-1&&(r=e-2);break}for(var n=[],s=t;s<=r;s++)e-1!==s&&n.push(o[s]);return console.log(n),n},o.prototype.checkRow=function(){a.default.trace("in checkRows()");var e=this.point.x_coor,o=this.board.getRowFromYCoordinate(this.point.y_coor),t=0,r=8;for(var i in o)if(null!=o[i].piece)if(a.default.trace("有棋子"),a.default.trace(o),parseInt(i)<e-1)o[i].getPiece().isFriendly()?(console.log("---------------------------------debug-----------------------------"),t=parseInt(i)+1):t=parseInt(i),t===e-1&&(t=e),a.default.trace("start_flag:"+t);else if(parseInt(i)>e-1){(r=o[i].getPiece().isFriendly()?parseInt(i)-1:parseInt(i))===e-1&&(r=e-2),a.default.trace("end_flag:"+r);break}for(var n=[],c=t;c<=r;c++)e-1!==c&&n.push(o[c]);return console.log(n),n},o}(c.Piece));o.BlackCannon=s},884:function(e,o,t){var r,i=this&&this.__extends||(r=function(e,o){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,o){e.__proto__=o}||function(e,o){for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t])})(e,o)},function(e,o){function t(){this.constructor=e}r(e,o),e.prototype=null===o?Object.create(o):(t.prototype=o.prototype,new t)}),n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(o,"__esModule",{value:!0}),o.BlackChariot=o.RedChariot=void 0;var a=n(t(102)),c=t(476),s=function(e){function o(o,t,r){return e.call(this,o,t,c.PieceRole.General,r)||this}return i(o,e),o.prototype.canMove=function(o){var t=o.x_coor,r=o.y_coor;return!(!this.isValidChariotPosition(t,r)||Math.abs(t-this.point.x_coor)>1||Math.abs(r-this.point.y_coor)>1||e.prototype.checkSameColorPieceInPoint.call(this,o))},o}(c.Piece),l=function(e){function o(o,t){var r=e.call(this,t,o,c.PlayerColor.RED)||this;return r.elem.src="../img/pieces/red-ju.png",r.board=o,r.point.setPiece(r),$(r.elem).on("click",(function(){r.movablePoints()})),r}return i(o,e),o.prototype.movablePoints=function(){var e=[];return(e=e.concat(this.checkRow())).concat(this.checkColumn())},o.prototype.checkColumn=function(){a.default.trace("in checkColumns");var e=this.point.y_coor,o=(this.point.x_coor,this.board.getColFromXCoordinate(this.point.x_coor)),t=(this.board.getRowFromYCoordinate(this.point.y_coor),0),r=9;for(var i in o)if(null!=o[i].piece)if(parseInt(i)<e-1)(t=o[i].piece.color==c.PlayerColor.RED?parseInt(i)+1:parseInt(i))===e-1&&(t=e);else if(parseInt(i)>e-1){(r=o[i].piece.color==c.PlayerColor.RED?parseInt(i)-1:parseInt(i))===e-1&&(r=e-2);break}for(var n=[],s=t;s<=r;s++)e-1!==s&&n.push(o[s]);return n},o.prototype.checkRow=function(){a.default.trace("in checkRows()");var e=this.point.x_coor,o=this.board.getRowFromYCoordinate(this.point.y_coor),t=0,r=8;for(var i in o)if(null!=o[i].piece)if(parseInt(i)<e-1)(t=o[i].piece.color==c.PlayerColor.RED?parseInt(i)+1:parseInt(i))===e-1&&(t=e),a.default.trace("start_flag:"+t);else if(parseInt(i)>e-1){(r=o[i].piece.color==c.PlayerColor.RED?parseInt(i)-1:parseInt(i))===e-1&&(r=e-2),a.default.trace("end_flag:"+r);break}for(var n=[],s=t;s<=r;s++)e-1!==s&&n.push(o[s]);return n},o.prototype.isValidChariotPosition=function(e,o){return o>=8&&o<=10&&e>=4&&e<=6},o}(s);o.RedChariot=l;var d=function(e){function o(o,t){var r=e.call(this,t,o,c.PlayerColor.BLACK)||this;return r.elem.src="../img/pieces/black-ju.png",r.board=o,r.point.setPiece(r),$(r.elem).on("click",(function(){r.movablePoints()})),r}return i(o,e),o.prototype.movablePoints=function(){var e=[];return(e=e.concat(this.checkRow())).concat(this.checkColumn())},o.prototype.checkColumn=function(){a.default.trace("in checkColumns"),a.default.trace("Chariots");var e=this.point.y_coor,o=this.board.getColFromXCoordinate(this.point.x_coor),t=0,r=9;for(var i in o)if(a.default.trace("piece_col:"),a.default.trace(o),null!=o[i].piece)if(a.default.trace("有棋子"),parseInt(i)<e-1)o[i].piece.color==c.PlayerColor.BLACK?(a.default.trace("队友在上方"),t=parseInt(i)+1):o[i].piece.color!=c.PlayerColor.BLACK&&(t=parseInt(i),console.log("debugging..........................."),console.log(t)),t===e-1&&(t=e);else if(parseInt(i)>e-1){o[i].piece.color==c.PlayerColor.BLACK?r=parseInt(i)-1:o[i].piece.color!=c.PlayerColor.BLACK&&(r=parseInt(i)),r===e-1&&(r=e-2);break}for(var n=[],s=t;s<=r;s++)e-1!==s&&n.push(o[s]);return console.log(n),n},o.prototype.checkRow=function(){a.default.trace("in checkRows()");var e=this.point.x_coor,o=this.board.getRowFromYCoordinate(this.point.y_coor),t=0,r=8;for(var i in o)if(null!=o[i].piece)if(a.default.trace("有棋子"),a.default.trace(o),parseInt(i)<e-1)o[i].getPiece().isFriendly()?(console.log("---------------------------------debug-----------------------------"),t=parseInt(i)+1):t=parseInt(i),t===e-1&&(t=e),a.default.trace("start_flag:"+t);else if(parseInt(i)>e-1){(r=o[i].getPiece().isFriendly()?parseInt(i)-1:parseInt(i))===e-1&&(r=e-2),a.default.trace("end_flag:"+r);break}for(var n=[],c=t;c<=r;c++)e-1!==c&&n.push(o[c]);return console.log(n),n},o.prototype.isValidChariotPosition=function(e,o){return o>=0&&o<=10&&e>=0&&e<=9},o}(s);o.BlackChariot=d},476:function(e,o,t){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(o,"__esModule",{value:!0}),o.PlayerColor=o.PieceRole=o.Piece=void 0;var i,n=r(t(102)),a=t(950);Object.defineProperty(o,"PlayerColor",{enumerable:!0,get:function(){return a.PlayerColor}}),function(e){e[e.General=0]="General",e[e.Advisor=1]="Advisor",e[e.Elephant=2]="Elephant",e[e.Chariot=3]="Chariot",e[e.Horse=4]="Horse",e[e.Cannon=5]="Cannon",e[e.Soldier=6]="Soldier"}(i||(i={})),o.PieceRole=i;var c=function(){function e(e,o,t,r){this.point=e,this.active=!1,this.board=o,this.piece_role=t,this.color=r,this.elem=document.createElement("img"),this.ratio=100,this.side_length=.01*this.ratio*a.SIDE_LENGTH,this.state=0,$(window).on("mousedown",(function(e){e.preventDefault()})),$(window).on("change",(function(e){e.preventDefault(),console.log("changed")})),this.listenerManager()}return e.prototype.listenerManager=function(){this.attachSelectPieceListener()},e.prototype.attachSelectPieceListener=function(){var e=this;console.log("attachSelectPieceListener, check active:"),console.log(this.board.active_piece),$(this.elem).on("click",(function(o){if(e.board.active_piece)console.log("其他棋子还没走呢！");else{console.log("其他棋子走过了"),console.log("点击了棋子："),console.log(e.elem),o.preventDefault(),$(".className_grid_div").css("background","rgba(3, 181, 252,0.0)");var t=[];t=e.movablePoints(),e.getCurrentPlayer()==e.color&&t.forEach((function(e){$(e.elem).css("background","rgba(3, 181, 252,0.5")})),e.active=!0,e.board.active_piece=e,setTimeout((function(){e.attachMoveToGridListener()}),100)}}))},e.prototype.attachMoveToGridListener=function(){var e=this;console.log(this.point),$(".className_grid_div").on("click",(function(o){if(console.log("点击了棋子:"),console.log(o.target),console.log(o.target.tagName),console.log("棋子所在的格子:"),console.log(o.target.parentNode),console.log(o.target.parentElement),e.board.active_piece&&e.board.game.getCurrentPlayer()==e.color){if(console.log("the piece is selected?"+e.active),console.log("active piece:"),console.log(e.board.active_piece),console.log(e.board.target_coordinate),"IMG"==o.target.tagName.toUpperCase()){console.log("点击了另一个棋子");var t=o.target.parentElement;null!=t&&(console.log("棋子所在的格子："),console.log(t),e.board.target_coordinate=e.board.getCoordinateFromElemId(t.id))}else console.log("点击了一个空的格子"),e.board.target_coordinate=e.board.getCoordinateFromElemId(o.target.id);if(console.log(e.board.getPointFromCoordinates(e.board.target_coordinate[0],e.board.target_coordinate[1])),-1!=e.board.target_coordinate[0]&&-1!=e.board.target_coordinate[1]){if(e.board.getPointFromCoordinates(e.board.target_coordinate[0],e.board.target_coordinate[1]).hasPiece()){if(console.log("该点有棋子"),console.log("=========================== debug ================================="),console.log(e.isFriendly(e.board.getPointFromCoordinates(e.board.target_coordinate[0],e.board.target_coordinate[1]).getPiece())),e.isFriendly(e.board.getPointFromCoordinates(e.board.target_coordinate[0],e.board.target_coordinate[1]).getPiece()))return alert("You Can't Move Here, A Friendly Piece is at this Position"),void e.removeMoveToGridListener();e.isFriendly(e.board.getPointFromCoordinates(e.board.target_coordinate[0],e.board.target_coordinate[1]).getPiece()),delete e.board.getPointFromCoordinates(e.board.target_coordinate[0],e.board.target_coordinate[1]).piece,console.log("=========  debug ==========="),console.log(e.board.getPointFromCoordinates(e.board.target_coordinate[0],e.board.target_coordinate[1])),e.board.getPointFromCoordinates(e.board.target_coordinate[0],e.board.target_coordinate[1]).elem.innerHTML=""}else e.board.getPointFromCoordinates(e.board.target_coordinate[0],e.board.target_coordinate[1]).elem.innerHTML="";console.log(e.board.target_coordinate);var r=e.board.target_coordinate[0],i=e.board.target_coordinate[1];e.board.active_piece.moveToPoint(e.board.getPointFromCoordinates(r,i)),$(".className_grid_div").css("background","rgba(0,0,0,0.0)"),e.board.target_coordinate=[-1,-1],e.active=!1,e.board.game.alternatePlayer()}}else console.log("还没有选择棋子......"),console.log("Is the piece is selected? "+e.active),console.log("Doing nothing..."),$(".className_grid_div").css("background","rgba(0,0,0,0.0)");e.removeMoveToGridListener()}))},e.prototype.removeMoveToGridListener=function(){this.board.active_piece=null,console.log("已经点击了移动目标格,现在移除MoveToGridListener"),$(".className_grid_div").off("click"),$(".className_grid_div").css("background","rgba(0,0,0,0.0)")},e.prototype.movablePoints=function(){return n.default.trace("movable points of a piece"),[]},e.prototype.getElement=function(){return this.elem},e.prototype.moveToPoint=function(e){this.board.intersections[this.point.x_coor-1][this.point.y_coor-1].elem.removeChild(this.elem),delete this.board.intersections[this.point.x_coor-1][this.point.y_coor-1].piece,this.point=e,this.board.intersections[this.point.x_coor-1][this.point.y_coor-1].elem.appendChild(this.elem),this.board.intersections[this.point.x_coor-1][this.point.y_coor-1].piece=this,console.log(this.board.intersections),console.log(this.point),console.log(this.point.x_coor),console.log(this.point.y_coor)},e.prototype.getRole=function(){return this.piece_role},e.prototype.getColor=function(){return this.color},e.prototype.getCurrentPlayer=function(){return this.board.game.getCurrentPlayer()},e.prototype.getTargetPointCoordinate=function(){return this.board.target_coordinate},e.prototype.getTargetPointXCoordinate=function(){return this.board.target_coordinate[0]},e.prototype.getTargetPointYCoordinate=function(){return this.board.target_coordinate[1]},e.prototype.checkSameColorPieceInPoint=function(e){var o=e.getPiece();return!!o&&o.getColor()===this.color},e.prototype.isFriendly=function(e){try{return e||console.log("没有棋子！"),e.getColor()===this.color}catch(e){console.log("没有棋子！")}return!0},e.prototype.isEnemy=function(e){return!!e&&e.getColor()!=this.color},e.prototype.render=function(){this.board.intersections[this.point.x_coor-1][this.point.y_coor-1].elem.append(this.elem),$(this.elem).addClass("pieces"),$(this.elem).addClass(i[this.piece_role].toString()),$(this.elem).addClass(a.PlayerColor[this.color].toString())},e.adjustResize=function(){screen.width==window.innerWidth?(console.log("at exact 100%"),a.getChessBoardSize(),$(".className_grid_div").css("width",a.SIDE_LENGTH*(a.getZoomedRatio()/100)),$(".className_grid_div").css("height",a.SIDE_LENGTH*(a.getZoomedRatio()/100)),$(".pieces").css("width",a.SIDE_LENGTH*(a.getZoomedRatio()/100)),$(".pieces").css("height",a.SIDE_LENGTH*(a.getZoomedRatio()/100)),$("#board").css("width",$("#board").css("height")),$("#id_chessboard").css("width",$("#board").css("width"))):screen.width>window.innerWidth?(console.log("you have zoomed in the page i.e more than 100%"),a.getZoomedRatio(),a.getChessBoardSize(),$(".className_grid_div").css("width",a.SIDE_LENGTH*(a.getZoomedRatio()/100)),$(".className_grid_div").css("height",a.SIDE_LENGTH*(a.getZoomedRatio()/100)),$(".pieces").css("width",a.SIDE_LENGTH*(a.getZoomedRatio()/100)),$(".pieces").css("height",a.SIDE_LENGTH*(a.getZoomedRatio()/100)),$("#board").css("width",$("#board").css("height")),$("#id_chessboard").css("width",$("#board").css("width"))):(console.log("you have zoomed out i.e less than 100%"),a.getZoomedRatio(),a.getChessBoardSize(),$(".className_grid_div").css("width"),$(".className_grid_div").css("width",a.SIDE_LENGTH*(a.getZoomedRatio()/100)),$(".className_grid_div").css("height",a.SIDE_LENGTH*(a.getZoomedRatio()/100)),$(".pieces").css("width",a.SIDE_LENGTH*(a.getZoomedRatio()/100)),$(".pieces").css("height",a.SIDE_LENGTH*(a.getZoomedRatio()/100)),$("#board").css("width",$("#board").css("height")),$("#id_chessboard").css("width",$("#board").css("width")))},e}();o.Piece=c},20:(e,o,t)=>{var r=t(718),i=t(884),n=t(950),a=t(360),c=t(232);(new(function(){function e(){this.currentPlayer=n.PlayerColor.RED,this.board=new r.Board(this)}return e.prototype.getCurrentPlayer=function(){return this.currentPlayer},e.prototype.alternatePlayer=function(){this.currentPlayer===n.PlayerColor.RED?this.currentPlayer=n.PlayerColor.BLACK:this.currentPlayer=n.PlayerColor.RED},e.prototype.render=function(){this.board.render(),new a.RedGeneral(this.board,this.board.getPointFromCoordinates(5,10)).render(),new a.BlackGeneral(this.board,this.board.getPointFromCoordinates(5,1)).render();var e=new i.RedChariot(this.board,this.board.getPointFromCoordinates(1,10)),o=new i.RedChariot(this.board,this.board.getPointFromCoordinates(9,10)),t=new i.BlackChariot(this.board,this.board.getPointFromCoordinates(1,1)),r=new i.BlackChariot(this.board,this.board.getPointFromCoordinates(9,1)),n=new c.BlackCannon(this.board,this.board.getPointFromCoordinates(2,3)),s=new c.BlackCannon(this.board,this.board.getPointFromCoordinates(2,4));e.render(),o.render(),t.render(),r.render(),n.render(),s.render()},e}())).render()},360:function(e,o,t){var r,i=this&&this.__extends||(r=function(e,o){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,o){e.__proto__=o}||function(e,o){for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t])})(e,o)},function(e,o){function t(){this.constructor=e}r(e,o),e.prototype=null===o?Object.create(o):(t.prototype=o.prototype,new t)});Object.defineProperty(o,"__esModule",{value:!0}),o.BlackGeneral=o.RedGeneral=void 0;var n=t(476),a=t(950),c=function(e){function o(o,t,r){return e.call(this,o,t,n.PieceRole.General,r)||this}return i(o,e),o.prototype.canMove=function(o){var t=o.x_coor,r=o.y_coor;return!(Math.abs(t-this.point.x_coor)>1||Math.abs(r-this.point.y_coor)>1||e.prototype.checkSameColorPieceInPoint.call(this,o))},o}(n.Piece),s=function(e){function o(o,t){var r=e.call(this,t,o,n.PlayerColor.RED)||this;return r.elem.src="../img/pieces/red-shuai.png",r.board=o,r.point.setPiece(r),r}return i(o,e),o.prototype.movablePoints=function(){var e=[];return e.concat(this.checkPeriphery())},o.prototype.checkPeriphery=function(){var e=this.point.y_coor,o=this.point.x_coor,t=this.board.getPointFromCoordinates(o,e-1),r=this.board.getPointFromCoordinates(o,e+1),i=this.board.getPointFromCoordinates(o-1,e),n=this.board.getPointFromCoordinates(o+1,e),a=[];return console.log("+++++++++++++ debug +++++++++++++++++++++++"),t&&this.isValidGeneralPosition(t)&&(console.log("front.getPiece()"),console.log(t.getPiece()),a.push(t)),r&&this.isValidGeneralPosition(r)&&(console.log("back.getPiece()"),console.log(r.getPiece()),a.push(r)),i&&this.isValidGeneralPosition(i)&&(console.log("back.getPiece()"),console.log(i.getPiece()),a.push(i)),n&&this.isValidGeneralPosition(n)&&(console.log("back.getPiece()"),console.log(n.getPiece()),a.push(n)),a},o.prototype.isValidGeneralPosition=function(e){return console.log("isValidGeneralPosition +++++++++++"),console.log(e),console.log(e.getX()),console.log(e.getY()),e.getX()-1>=3&&e.getX()-1<=5&&e.getY()-1>=7&&e.getY()-1<=9},o}(c);o.RedGeneral=s;var l=function(e){function o(o,t){var r=e.call(this,t,o,n.PlayerColor.BLACK)||this;return r.elem.src="../img/pieces/black-jiang.png",r.board=o,r.point.setPiece(r),r}return i(o,e),o.prototype.movablePoints=function(){var e=[];return e.concat(this.checkPeriphery())},o.prototype.checkPeriphery=function(){var e=this.point.getX(),o=this.point.getY(),t=this.board.getPointFromCoordinates(e,o-1),r=new a.Point(-1,-1);try{r=this.board.getPointFromCoordinates(e,o+1)}catch(e){console.error(e)}var i=this.board.getPointFromCoordinates(e-1,o),n=this.board.getPointFromCoordinates(e+1,o),c=[];return console.log("++++++++++++++++++++++ debug +++++++++++++++++++++++"),t&&this.isValidGeneralPosition(t)&&(console.log("front.getPiece()"),console.log(t.getPiece()),c.push(t)),r&&this.isValidGeneralPosition(r)&&(console.log("back.getPiece()"),console.log(r.getPiece()),c.push(r)),i&&this.isValidGeneralPosition(i)&&(console.log("back.getPiece()"),console.log(i.getPiece()),c.push(i)),n&&this.isValidGeneralPosition(n)&&(console.log("back.getPiece()"),console.log(n.getPiece()),c.push(n)),c},o.prototype.isValidGeneralPosition=function(e){return console.log("isValidGeneralPosition +++++++++++"),console.log(e),console.log(e.getX()),console.log(e.getY()),e.getX()>=4&&e.getX()-1<=6&&e.getY()>=1&&e.getY()<=3},o}(c);o.BlackGeneral=l},950:function(e,o,t){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(o,"__esModule",{value:!0}),o.PlayerColor=o.SIDE_LENGTH_vw=o.SIDE_LENGTH=o.Point=o.fitSize=o.getChessBoardSize=o.getZoomedRatio=void 0;var i,n=r(t(102));function a(){var e=0;return void 0!==window.devicePixelRatio?e=window.devicePixelRatio:void 0!==window.outerWidth&&void 0!==window.innerWidth&&(e=window.outerWidth/window.innerWidth),e&&(e=Math.round(100*e)),e}!function(e){e[e.BLACK=0]="BLACK",e[e.RED=1]="RED",e[e.NEUTRAL=2]="NEUTRAL",e[e.SPECTATOR=3]="SPECTATOR"}(i||(i={})),o.PlayerColor=i,o.getZoomedRatio=a,o.getChessBoardSize=function(){n.default.trace("chessboard size:");var e=$("#id_chessboard");n.default.trace("chessboad width"),n.default.trace(e.css("width")),n.default.trace("chessboad height"),n.default.trace(e.css("height"))};var c=function(){function e(e,o){this.x_coor=e,this.y_coor=o,this.elem=document.createElement("div"),this.updateElement(e,o)}return e.prototype.setPiece=function(e){this.piece=e},e.prototype.hasPiece=function(){return!!this.piece},e.prototype.getPiece=function(){return this.piece},e.prototype.getX=function(){return this.x_coor},e.prototype.getY=function(){return this.y_coor},e.prototype.updateElement=function(e,o){var t=this.elem,r=this.x_coor,i=this.y_coor;t.id="grid_div_"+r+"_"+i,$("#"+t.id).remove(),t.className="className_grid_div",$(t).css("grid-column",e),$(t).css("grid-row",o),$("#board").append(t)},e}();o.Point=c,o.SIDE_LENGTH=75;var s=70/(.01*a());o.SIDE_LENGTH_vw=s,o.fitSize=function(){var e=$("#board");$.when(e).then((function(){console.log("background-size"),console.log(e.css("background-size")),e.css("width",e.css("height")),e.css("height",e.css("width")),e.css("column-gap","0px"),console.log(e.css("row-gap"))})).then((function(){$(".className_grid_div").css("width",parseInt(e.css("width"))/11),$(".className_grid_div").css("height",parseInt(e.css("height"))/10),$(".className_grid_div").css("z-index",10),$(".className_grid_div").css("margin",0)})).then((function(){$(".pieces").css("width",parseInt($(".className_grid_div").css("width"))),$(".pieces").css("height",parseInt($(".className_grid_div").css("width")))})).then((function(){e.css("max-width",e.css("height"))}))}},102:function(e,o){var t=this&&this.__spreadArrays||function(){for(var e=0,o=0,t=arguments.length;o<t;o++)e+=arguments[o].length;var r=Array(e),i=0;for(o=0;o<t;o++)for(var n=arguments[o],a=0,c=n.length;a<c;a++,i++)r[i]=n[a];return r};Object.defineProperty(o,"__esModule",{value:!0});var r=function(){function e(){}return e.trace=function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];console.log.apply(console,t(["<T> "+(new Date).toLocaleString()+":"],e))},e.info=function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];console.info.apply(console,t(["<I> "+(new Date).toLocaleString()+":"],e))},e.warn=function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];console.warn.apply(console,t(["<W> "+(new Date).toLocaleString()+":"],e))},e.error=function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];console.error.apply(console,t(["<E> "+(new Date).toLocaleString()+":"],e))},e.test=function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];console.log.apply(console,t(["<X> "+(new Date).toLocaleString()+":"],e))},e}();o.default=r}},o={};!function t(r){if(o[r])return o[r].exports;var i=o[r]={exports:{}};return e[r].call(i.exports,i,i.exports,t),i.exports}(20)})();
//# sourceMappingURL=bundle.js.map